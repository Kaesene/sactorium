<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sactorium Desktop</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <h1>üìä Sactorium Desktop</h1>
            <p>Sistema de gest√£o de produtos e vendas</p>
        </header>

        <!-- Navigation Tabs -->
        <nav class="tab-nav">
            <button class="tab-btn active" data-tab="products">üì¶ Gest√£o de Produtos</button>
            <button class="tab-btn" data-tab="calculator">üí∞ Calculadora ML</button>
            <button class="tab-btn" data-tab="imports">üö¢ Importa√ß√µes</button>
        </nav>

        <!-- Products Tab -->
        <div class="tab-content active" id="products-tab">
            <div class="main-layout">
                <!-- Sidebar with actions -->
                <aside class="sidebar">
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="showAddProduct()">
                            ‚ûï Cadastrar Produto
                        </button>
                        <button class="btn btn-secondary" onclick="importProducts()">
                            üìã Importar Produtos
                        </button>
                        <button class="btn btn-info" onclick="showImportInstructions()">
                            ‚ùì Ajuda Importa√ß√£o
                        </button>
                        <hr>
                        <button class="btn btn-success" onclick="registerSale()">
                            üí∞ Registrar Venda
                        </button>
                        <button class="btn btn-info" onclick="showSales()">
                            üìà Ver Vendas
                        </button>
                        <hr>
                        <button class="btn btn-secondary" onclick="refreshProducts()">
                            üîÑ Atualizar Lista
                        </button>
                    </div>
                </aside>

                <!-- Main content area -->
                <main class="main-content">
                    <!-- Margin selector -->
                    <div class="margin-selector">
                        <label>
                            <input type="radio" name="margin" value="30" checked>
                            üìä TABELA 30% MARGEM
                        </label>
                        <label>
                            <input type="radio" name="margin" value="40">
                            üìà TABELA 40% MARGEM
                        </label>
                    </div>

                    <!-- Products table -->
                    <div class="table-container">
                        <table class="products-table" id="products-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Nome do Produto</th>
                                    <th>Pre√ßo Custo (R$)</th>
                                    <th>Pre√ßo Final (R$)</th>
                                    <th>Estoque</th>
                                    <th>Categoria</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="products-tbody">
                                <!-- Products will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </main>

                <!-- Product info panel -->
                <aside class="info-panel">
                    <h3>üìã Informa√ß√µes</h3>
                    <div id="product-info">
                        <p>Selecione um produto para ver detalhes</p>
                    </div>
                </aside>
            </div>
        </div>

        <!-- Calculator Tab -->
        <div class="tab-content" id="calculator-tab">
            <div class="calculator-layout">
                <h2>üí∞ Calculadora de Pre√ßos - Mercado Livre</h2>
                
                <div class="calculator-inputs">
                    <div class="input-group">
                        <label>Produto:</label>
                        <select id="ml-product-select">
                            <option value="">Selecione um produto...</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label>Custo (R$):</label>
                        <input type="number" id="ml-cost" step="0.01" readonly>
                    </div>
                    
                    <div class="input-group">
                        <label>Valor Final Venda (R$):</label>
                        <input type="number" id="ml-price" step="0.01" placeholder="0.00">
                    </div>
                    
                    <div class="input-group">
                        <label>Envio (R$):</label>
                        <input type="number" id="ml-shipping" step="0.01" value="0.00">
                    </div>
                    
                    <div class="input-group">
                        <label>Imposto (%):</label>
                        <select id="ml-tax">
                            <option value="4">4%</option>
                            <option value="7">7%</option>
                            <option value="10">10%</option>
                        </select>
                    </div>
                </div>
                
                <button class="btn btn-primary" onclick="calculateML()">üìä Calcular Lucro</button>
                
                <div class="results-container">
                    <div class="result-card">
                        <h3>üî¥ OP√á√ÉO TAXA 17%</h3>
                        <div id="result-17" class="result-content">
                            Selecione um produto para calcular
                        </div>
                    </div>
                    
                    <div class="result-card">
                        <h3>üîµ OP√á√ÉO TAXA 12%</h3>
                        <div id="result-12" class="result-content">
                            Selecione um produto para calcular
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Imports Tab -->
        <div class="tab-content" id="imports-tab">
            <div class="imports-layout">
                <h2>üö¢ Calculadora de Importa√ß√µes</h2>
                
                <div class="imports-container">
                    <!-- Dados do Produto -->
                    <div class="import-section">
                        <h3>üì¶ Dados do Produto - Paraguai</h3>
                        <div class="imports-inputs">
                            <div class="input-group">
                                <label>Nome do Produto:</label>
                                <input type="text" id="import-product-name" placeholder="Nome do produto...">
                            </div>
                            
                            <!-- NCM Section -->
                            <div class="ncm-section">
                                <div class="input-group">
                                    <label>üîç Buscar NCM:</label>
                                    <input type="text" id="ncm-search" placeholder="Digite c√≥digo NCM ou descri√ß√£o...">
                                </div>
                                <div class="ncm-results" id="ncm-results" style="display: none;">
                                    <div class="ncm-list" id="ncm-list"></div>
                                </div>
                                <div class="selected-ncm" id="selected-ncm" style="display: none;">
                                    <h4>üìã NCM Selecionado:</h4>
                                    <div class="ncm-details">
                                        <div><strong>C√≥digo:</strong> <span id="selected-ncm-code">-</span></div>
                                        <div><strong>Descri√ß√£o:</strong> <span id="selected-ncm-desc">-</span></div>
                                        <div><strong>Categoria:</strong> <span id="selected-ncm-category">-</span></div>
                                        <div class="tax-preview">
                                            <strong>Impostos: </strong>
                                            II: <span id="selected-ncm-ii">0</span>% | 
                                            IPI: <span id="selected-ncm-ipi">0</span>% | 
                                            PIS/COFINS: <span id="selected-ncm-pis">0</span>% | 
                                            ICMS: <span id="selected-ncm-icms">0</span>%
                                        </div>
                                    </div>
                                    <button class="btn btn-sm btn-secondary" onclick="clearSelectedNCM()">Limpar NCM</button>
                                </div>
                            </div>
                            
                            <div class="input-row">
                                <div class="input-group">
                                    <label>Pre√ßo FOB (USD):</label>
                                    <input type="number" id="import-fob-price" step="0.01" placeholder="0.00">
                                </div>
                                
                                <div class="input-group">
                                    <label>Quantidade:</label>
                                    <input type="number" id="import-quantity" placeholder="1">
                                </div>
                                
                                <div class="input-group">
                                    <label>Peso (kg):</label>
                                    <input type="number" id="import-weight" step="0.01" placeholder="0.00">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Custos de Importa√ß√£o -->
                    <div class="import-section">
                        <h3>üí∞ Custos de Importa√ß√£o</h3>
                        <div class="imports-inputs">
                            <div class="input-row">
                                <div class="input-group">
                                    <label>Taxa USD (R$):</label>
                                    <input type="number" id="import-usd-rate" step="0.01" value="5.50" placeholder="5.50">
                                </div>
                                
                                <div class="input-group">
                                    <label>Frete Internacional (USD):</label>
                                    <input type="number" id="import-freight" step="0.01" placeholder="0.00">
                                </div>
                                
                                <div class="input-group">
                                    <label>Seguro (%FOB):</label>
                                    <input type="number" id="import-insurance" step="0.01" value="0.5" placeholder="0.5">
                                </div>
                            </div>
                            
                            <div class="input-row">
                                <div class="input-group">
                                    <label>Imposto de Importa√ß√£o (%):</label>
                                    <input type="number" id="import-tax" step="0.01" value="14" placeholder="14">
                                </div>
                                
                                <div class="input-group">
                                    <label>IPI (%):</label>
                                    <input type="number" id="import-ipi" step="0.01" value="15" placeholder="15">
                                </div>
                                
                                <div class="input-group">
                                    <label>PIS/COFINS (%):</label>
                                    <input type="number" id="import-pis-cofins" step="0.01" value="9.25" placeholder="9.25">
                                </div>
                            </div>
                            
                            <div class="input-row">
                                <div class="input-group">
                                    <label>ICMS (%):</label>
                                    <input type="number" id="import-icms" step="0.01" value="18" placeholder="18">
                                </div>
                                
                                <div class="input-group">
                                    <label>Despachante (R$):</label>
                                    <input type="number" id="import-customs-broker" step="0.01" value="500" placeholder="500.00">
                                </div>
                                
                                <div class="input-group">
                                    <label>Outras Despesas (R$):</label>
                                    <input type="number" id="import-other-costs" step="0.01" placeholder="0.00">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Margem de Lucro -->
                    <div class="import-section">
                        <h3>üìà Margem de Lucro</h3>
                        <div class="imports-inputs">
                            <div class="input-row">
                                <div class="input-group">
                                    <label>Margem Desejada (%):</label>
                                    <input type="number" id="import-margin" step="0.01" value="40" placeholder="40">
                                </div>
                                
                                <div class="input-group">
                                    <label>Comiss√£o ML (%):</label>
                                    <select id="import-ml-commission">
                                        <option value="12">12% (ML Cl√°ssico)</option>
                                        <option value="17">17% (ML Premium)</option>
                                        <option value="15">15% (Personalizado)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="calculation-buttons">
                    <button class="btn btn-primary" onclick="calculateImport()">üßÆ Calcular Importa√ß√£o</button>
                    <button class="btn btn-secondary" onclick="clearImportForm()">üóëÔ∏è Limpar</button>
                    <button class="btn btn-success" onclick="saveImportProduct()">üíæ Salvar Produto</button>
                    <button class="btn btn-info" onclick="showNCMManager()">üìã Gerenciar NCMs</button>
                </div>
                
                <!-- Resultados -->
                <div class="import-results-container" id="import-results" style="display: none;">
                    <div class="result-section">
                        <h3>üìä Resumo dos Custos</h3>
                        <div class="cost-breakdown">
                            <div class="cost-item">
                                <span>Produto (FOB):</span>
                                <span id="result-fob-brl">R$ 0,00</span>
                            </div>
                            <div class="cost-item">
                                <span>Frete + Seguro:</span>
                                <span id="result-freight-insurance">R$ 0,00</span>
                            </div>
                            <div class="cost-item">
                                <span>Impostos:</span>
                                <span id="result-taxes">R$ 0,00</span>
                            </div>
                            <div class="cost-item">
                                <span>Despesas Extras:</span>
                                <span id="result-extra-costs">R$ 0,00</span>
                            </div>
                            <div class="cost-item total">
                                <span><strong>Custo Total:</strong></span>
                                <span id="result-total-cost"><strong>R$ 0,00</strong></span>
                            </div>
                            <div class="cost-item unit">
                                <span><strong>Custo Unit√°rio:</strong></span>
                                <span id="result-unit-cost"><strong>R$ 0,00</strong></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="result-section">
                        <h3>üí∞ Pre√ßos de Venda</h3>
                        <div class="pricing-results">
                            <div class="price-option">
                                <h4>üõí Venda Direta</h4>
                                <div class="price-details">
                                    <div>Pre√ßo c/ Margem: <span id="result-direct-price">R$ 0,00</span></div>
                                    <div>Lucro Unit√°rio: <span id="result-direct-profit">R$ 0,00</span></div>
                                </div>
                            </div>
                            
                            <div class="price-option">
                                <h4>üöÄ Mercado Livre</h4>
                                <div class="price-details">
                                    <div>Pre√ßo Final: <span id="result-ml-price">R$ 0,00</span></div>
                                    <div>Ap√≥s Comiss√£o: <span id="result-ml-net">R$ 0,00</span></div>
                                    <div>Lucro Unit√°rio: <span id="result-ml-profit">R$ 0,00</span></div>
                                    <div>Margem Real: <span id="result-ml-margin">0%</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div class="modal" id="product-modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('product-modal')">&times;</span>
            <h2 id="modal-title">Cadastrar Produto</h2>
            <form id="product-form">
                <input type="hidden" id="product-id">
                
                <div class="form-group">
                    <label>Nome do Produto:</label>
                    <input type="text" id="product-name" required>
                </div>
                
                <div class="form-group">
                    <label>Pre√ßo de Custo (R$):</label>
                    <input type="number" id="product-cost" step="0.01" required>
                </div>
                
                <div class="form-group">
                    <label>Estoque:</label>
                    <input type="number" id="product-stock" required>
                </div>
                
                <div class="form-group">
                    <label>Categoria:</label>
                    <input type="text" id="product-category">
                </div>
                
                <div class="form-group">
                    <label>NCM:</label>
                    <input type="text" id="product-ncm">
                </div>
                
                <div class="form-group">
                    <label>Fabricante:</label>
                    <input type="text" id="product-manufacturer">
                </div>
                
                <div class="form-group">
                    <label>Descri√ß√£o:</label>
                    <textarea id="product-description" rows="4"></textarea>
                </div>
                
                <div class="modal-actions">
                    <button type="submit" class="btn btn-primary">Salvar</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('product-modal')">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Sales Modal -->
    <div class="modal" id="sales-modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('sales-modal')">&times;</span>
            <h2>üìà Hist√≥rico de Vendas</h2>
            <div class="table-container">
                <table class="sales-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Produto</th>
                            <th>Qtd</th>
                            <th>Pre√ßo Unit.</th>
                            <th>Total</th>
                            <th>Cliente</th>
                            <th>Data</th>
                        </tr>
                    </thead>
                    <tbody id="sales-tbody">
                        <!-- Sales will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- NCM Manager Modal -->
    <div class="modal" id="ncm-modal">
        <div class="modal-content modal-large">
            <span class="close" onclick="closeModal('ncm-modal')">&times;</span>
            <h2>üìã Gerenciamento de NCMs - Paraguai</h2>
            
            <div class="ncm-manager">
                <!-- Add NCM Form -->
                <div class="ncm-form-section">
                    <h3>‚ûï Adicionar Novo NCM</h3>
                    <form id="ncm-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label>C√≥digo NCM:</label>
                                <input type="text" id="new-ncm-code" required maxlength="8" placeholder="12345678">
                            </div>
                            <div class="form-group">
                                <label>Categoria:</label>
                                <select id="new-ncm-category">
                                    <option value="Eletr√¥nicos">Eletr√¥nicos</option>
                                    <option value="Inform√°tica">Inform√°tica</option>
                                    <option value="Acess√≥rios">Acess√≥rios</option>
                                    <option value="Brinquedos">Brinquedos</option>
                                    <option value="Vestu√°rio">Vestu√°rio</option>
                                    <option value="Cal√ßados">Cal√ßados</option>
                                    <option value="Ferramentas">Ferramentas</option>
                                    <option value="Cosm√©ticos">Cosm√©ticos</option>
                                    <option value="Outros">Outros</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Descri√ß√£o:</label>
                            <input type="text" id="new-ncm-description" required placeholder="Descri√ß√£o do produto...">
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>Imposto Importa√ß√£o (%):</label>
                                <input type="number" id="new-ncm-import-tax" step="0.01" value="16" min="0" max="100">
                            </div>
                            <div class="form-group">
                                <label>IPI (%):</label>
                                <input type="number" id="new-ncm-ipi" step="0.01" value="0" min="0" max="100">
                            </div>
                            <div class="form-group">
                                <label>PIS/COFINS (%):</label>
                                <input type="number" id="new-ncm-pis-cofins" step="0.01" value="9.25" min="0" max="50">
                            </div>
                            <div class="form-group">
                                <label>ICMS (%):</label>
                                <input type="number" id="new-ncm-icms" step="0.01" value="18" min="0" max="30">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Observa√ß√µes:</label>
                            <textarea id="new-ncm-notes" rows="2" placeholder="Observa√ß√µes sobre este NCM..."></textarea>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">üíæ Salvar NCM</button>
                            <button type="button" class="btn btn-secondary" onclick="clearNCMForm()">üóëÔ∏è Limpar</button>
                        </div>
                    </form>
                </div>
                
                <!-- NCM List -->
                <div class="ncm-list-section">
                    <h3>üìã NCMs Cadastrados</h3>
                    <div class="ncm-search-filter">
                        <input type="text" id="ncm-filter" placeholder="üîç Filtrar NCMs..." onkeyup="filterNCMList()">
                        <select id="category-filter" onchange="filterNCMList()">
                            <option value="">Todas as categorias</option>
                        </select>
                    </div>
                    
                    <div class="ncm-table-container">
                        <table class="ncm-table">
                            <thead>
                                <tr>
                                    <th>C√≥digo</th>
                                    <th>Descri√ß√£o</th>
                                    <th>Categoria</th>
                                    <th>II%</th>
                                    <th>IPI%</th>
                                    <th>ICMS%</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="ncm-table-body">
                                <!-- NCMs will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="renderer.js"></script>
</body>
</html>